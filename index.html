<html>
  <head>
    <title>EToH Tower Tracker</title>
    <link rel="stylesheet" href="dist/tailwind.css">
    <link rel="stylesheet" href="css/difficulties.css">
    <link rel="stylesheet" href="css/tables.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="description" content="Track badge progress for the roblox game Eternals Towers of Hell. Works with every badge in game (including unobtainable ones), offline, and can even filter completed areas or badge categories.">

    <!-- <script src="https://cdn.jsdelivr.net/npm/compress-json@3/bundle.min.js"></script> -->
    <!-- <script src="https://dragmine149.github.io/external/storage.js" type="module"></script>
    <script src="https://dragmine149.github.io/Scripts/verbose.mjs" type="module"></script> -->
    <!-- <script src="https://dragmine149.github.io/Scripts/verbose.css"></script> -->
    <!--<link rel="stylesheet" href="Scripts/verbose.css">
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>

    <script src="dist/index.js"></script>-->

    <!--<script src="Scripts/storage.js"></script>
    <script src="Scripts/verbose.js"></script>-->

    <!--<script src="newJs/constants.js"></script>
    <script src="newJs/main.js"></script>
    <script src="newJs/network.js"></script>

    <script src="newJs/DataManager.js"></script>
    <script src="newJs/BadgeManager.js"></script>
    <script src="newJs/AreaManager.js"></script>
    <script src="newJs/user.js"></script>

    <script src="newJs/Ui.js"></script>
    <script src="newJs/EToH.js"></script>-->
  </head>
  <body class="bg-gray-600 p-1.5 font-[Noto_Serif]">
    <div id="top_bar" class="relative bg-stone-800 flex items-center justify-between p-1.5 text-white rounded-t-sm">
      <nav class="flex gap-1 z-10">
        <a href="..">Main site</a>
        <a onclick="userManager.unloadUser()">Home</a>
        <a href="info.html">Information</a>
        <a href="https://github.com/dragmine149/eTOH/releases">Updates (github releases)</a>
      </nav>
      <div id="title" class="absolute inset-x-0 flex justify-center pointer-events-none">
        <span class="font-bold">EToH Tower Tracker&nbsp;</span><span class="italic">by dragmine149</span>
        <br>
        <span tag="status"></span>
      </div>
      <div id="viewing" class="z-10">
        Currently viewing user: <user onclick="miniSearch()">No-one!</user>
        <input type="text" id="mini-search" placeholder="Search..." hidden
          list="user_list"
          onsubmit="userManager.findUser(this.value); endMiniSearch();"
          onkeydown="if(event.key === 'Enter') { userManager.findUser(this.value); endMiniSearch(); }"
          onblur="endMiniSearch()"
          onmouseup="return false;"
          onfocus="this.select();">
      </div>
    </div>
    <div id="under_top_bar" class="bg-neutral-700 flex p-0 text-white rounded-b-sm">
      <div id="points" class="grid grid-rows-2 grid-cols-2">
        <span count="towers">Towers: </span>
        <span count="points">Tower points: </span>
        <span count="info" class="col-span-2">Permanent, Non mini-towers above. Hover to see all badges.</span>
      </div>
      <div id="categories" class="pl-5">
        View:
        <button onclick="etohUI.load_category('default')">Default</button>
        <button onclick="etohUI.load_category('difficulty')">Difficulty</button>
        <button onclick="etohUI.load_category('other')">Other</button>
      </div>
      <div id="toggleables">
        <button id="toggle-locked" onclick="etohUI.toggleLocked()">Hide Locked Towers</button>
        <button id="toggle-mini" onclick="etohUI.toggleMini()">Hide Mini Towers</button>
      </div>
      <div id="other" class="flex ml-auto">
        <div id="badge_search" hidden>
          <input type="text" id="badge-search-input" placeholder="Search for a Badge"
            oninput="etohUI.search(this.value)"
            onkeydown="if (event.key === 'Enter') { if (event.shiftKey) { return etohUI.previous_search(); } return etohUI.next_search() }"
          >
          <span tag="search_count"></span>
        </div>
        <button onclick="userManager.current_user.loadUncompleted()">Update Badges</button>
      </div>
    </div>

    <div id="count" hidden>
      <span count="NAT">Other: </span>
      <span count="Mini"> Mini-Towers (NEATs): </span>
      <span count="Steeple"> Steeples: </span>
      <span count="Tower">Towers: </span>
      <span count="Citadel">Citadels: </span>
      <span count="Obelisk">Obelisk: </span>
    </div>

    <div id="errors" hidden onclick="this.hidden = true;">
      <span id="error_message"></span>
      <br>
      <span id="error_details">Please reload and try again. If the issue persists, please open an <a href="https://github.com/dragmine149/ETOH/issues">issue</a></span>
      <span id="error_hint">Click me to hide!</span>
    </div>

    <datalist id="user_list"></datalist>
    <div id="main">
      <noscript class="noscript">
        For full functionality of this sub-site site it is necessary to enable <bold>JavaScript</bold>.<br>
        Here are the <a href="https://www.enablejavascript.io/">
          instructions on How to enable JavaScript in your web browser
        </a>.
      </noscript>
      <div id="load_error" hidden>

      </div>

      <div id="search" hidden>
        <div class="title">Load EToH Status</div>
        <div class="subtitle">Enter a Roblox username, user ID, or profile link to load their EToH status.</div>
        <input type="text" id="search_input" list="user_list" placeholder="Load towers via roblox username, user id or profile link"
          onsubmit="userManager.findUser(this.value)"
          onkeydown="if(event.key === 'Enter') userManager.findUser(this.value)">
        <button id="search_button" onclick="userManager.findUser(this.parentNode.querySelector('[id=\'search_input\']').value)">Search</button>
        <div id="progress">
          <span>Please note, first time load of a user will take a bit longer due to being a full load instead of a partial load.</span><br>
          <!-- <br> -->
        </div>
      </div>
      <div id="badges" hidden>
      </div>
    </div>
  </body>
</html>
